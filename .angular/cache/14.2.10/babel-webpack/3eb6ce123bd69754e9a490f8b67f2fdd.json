{"ast":null,"code":"import { thenable } from '../promise/thenable';\nimport { LOCALHOST_MODE } from '../constants';\nimport { WARN_NOT_EXISTENT_TT } from '../../logger/constants';\nfunction logTTExistanceWarning(log, maybeTT, method) {\n  log.warn(WARN_NOT_EXISTENT_TT, [method, maybeTT]);\n}\n/**\n * Separated from the previous method since on some cases it'll be async.\n */\nexport function validateTrafficTypeExistance(log, readinessManager, splitsCache, mode, maybeTT, method) {\n  // If not ready or in localhost mode, we won't run the validation\n  if (!readinessManager.isReady() || mode === LOCALHOST_MODE) return true;\n  var res = splitsCache.trafficTypeExists(maybeTT); // never rejects or throws error\n  if (thenable(res)) {\n    return res.then(function (isValid) {\n      if (!isValid) logTTExistanceWarning(log, maybeTT, method);\n      return isValid; // propagate result\n    });\n  } else {\n    if (!res) logTTExistanceWarning(log, maybeTT, method);\n    return res;\n  }\n}","map":{"version":3,"names":["thenable","LOCALHOST_MODE","WARN_NOT_EXISTENT_TT","logTTExistanceWarning","log","maybeTT","method","warn","validateTrafficTypeExistance","readinessManager","splitsCache","mode","isReady","res","trafficTypeExists","then","isValid"],"sources":["/Users/temitopeogunrekun/Desktop/angular-db/node_modules/@splitsoftware/splitio-commons/esm/utils/inputValidation/trafficTypeExistance.js"],"sourcesContent":["import { thenable } from '../promise/thenable';\nimport { LOCALHOST_MODE } from '../constants';\nimport { WARN_NOT_EXISTENT_TT } from '../../logger/constants';\nfunction logTTExistanceWarning(log, maybeTT, method) {\n    log.warn(WARN_NOT_EXISTENT_TT, [method, maybeTT]);\n}\n/**\n * Separated from the previous method since on some cases it'll be async.\n */\nexport function validateTrafficTypeExistance(log, readinessManager, splitsCache, mode, maybeTT, method) {\n    // If not ready or in localhost mode, we won't run the validation\n    if (!readinessManager.isReady() || mode === LOCALHOST_MODE)\n        return true;\n    var res = splitsCache.trafficTypeExists(maybeTT); // never rejects or throws error\n    if (thenable(res)) {\n        return res.then(function (isValid) {\n            if (!isValid)\n                logTTExistanceWarning(log, maybeTT, method);\n            return isValid; // propagate result\n        });\n    }\n    else {\n        if (!res)\n            logTTExistanceWarning(log, maybeTT, method);\n        return res;\n    }\n}\n"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,qBAAqB;AAC9C,SAASC,cAAc,QAAQ,cAAc;AAC7C,SAASC,oBAAoB,QAAQ,wBAAwB;AAC7D,SAASC,qBAAqB,CAACC,GAAG,EAAEC,OAAO,EAAEC,MAAM,EAAE;EACjDF,GAAG,CAACG,IAAI,CAACL,oBAAoB,EAAE,CAACI,MAAM,EAAED,OAAO,CAAC,CAAC;AACrD;AACA;AACA;AACA;AACA,OAAO,SAASG,4BAA4B,CAACJ,GAAG,EAAEK,gBAAgB,EAAEC,WAAW,EAAEC,IAAI,EAAEN,OAAO,EAAEC,MAAM,EAAE;EACpG;EACA,IAAI,CAACG,gBAAgB,CAACG,OAAO,EAAE,IAAID,IAAI,KAAKV,cAAc,EACtD,OAAO,IAAI;EACf,IAAIY,GAAG,GAAGH,WAAW,CAACI,iBAAiB,CAACT,OAAO,CAAC,CAAC,CAAC;EAClD,IAAIL,QAAQ,CAACa,GAAG,CAAC,EAAE;IACf,OAAOA,GAAG,CAACE,IAAI,CAAC,UAAUC,OAAO,EAAE;MAC/B,IAAI,CAACA,OAAO,EACRb,qBAAqB,CAACC,GAAG,EAAEC,OAAO,EAAEC,MAAM,CAAC;MAC/C,OAAOU,OAAO,CAAC,CAAC;IACpB,CAAC,CAAC;EACN,CAAC,MACI;IACD,IAAI,CAACH,GAAG,EACJV,qBAAqB,CAACC,GAAG,EAAEC,OAAO,EAAEC,MAAM,CAAC;IAC/C,OAAOO,GAAG;EACd;AACJ"},"metadata":{},"sourceType":"module"}