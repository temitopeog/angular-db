{"ast":null,"code":"import { ENGINE_BUCKET } from '../../logger/constants';\nimport { bucket } from '../../utils/murmur3/murmur3';\n/**\n * Get the treatment name given a key, a seed, and the percentage of each treatment.\n */\nexport function getTreatment(log, key, seed, treatments) {\n  var _bucket = bucket(key, seed);\n  var treatment = treatments.getTreatmentFor(_bucket);\n  log.debug(ENGINE_BUCKET, [_bucket, key, seed, treatment]);\n  return treatment;\n}\n/**\n * Evaluates the traffic allocation to see if we should apply rollout conditions or not.\n */\nexport function shouldApplyRollout(trafficAllocation, key, trafficAllocationSeed) {\n  // For rollout, if traffic allocation for splits is 100%, we don't need to filter it because everything should evaluate the rollout.\n  if (trafficAllocation < 100) {\n    var _bucket = bucket(key, trafficAllocationSeed);\n    if (_bucket > trafficAllocation) {\n      return false;\n    }\n  }\n  return true;\n}","map":{"version":3,"names":["ENGINE_BUCKET","bucket","getTreatment","log","key","seed","treatments","_bucket","treatment","getTreatmentFor","debug","shouldApplyRollout","trafficAllocation","trafficAllocationSeed"],"sources":["/Users/temitopeogunrekun/Desktop/angular-db/node_modules/@splitsoftware/splitio-commons/esm/evaluator/condition/engineUtils.js"],"sourcesContent":["import { ENGINE_BUCKET } from '../../logger/constants';\nimport { bucket } from '../../utils/murmur3/murmur3';\n/**\n * Get the treatment name given a key, a seed, and the percentage of each treatment.\n */\nexport function getTreatment(log, key, seed, treatments) {\n    var _bucket = bucket(key, seed);\n    var treatment = treatments.getTreatmentFor(_bucket);\n    log.debug(ENGINE_BUCKET, [_bucket, key, seed, treatment]);\n    return treatment;\n}\n/**\n * Evaluates the traffic allocation to see if we should apply rollout conditions or not.\n */\nexport function shouldApplyRollout(trafficAllocation, key, trafficAllocationSeed) {\n    // For rollout, if traffic allocation for splits is 100%, we don't need to filter it because everything should evaluate the rollout.\n    if (trafficAllocation < 100) {\n        var _bucket = bucket(key, trafficAllocationSeed);\n        if (_bucket > trafficAllocation) {\n            return false;\n        }\n    }\n    return true;\n}\n"],"mappings":"AAAA,SAASA,aAAa,QAAQ,wBAAwB;AACtD,SAASC,MAAM,QAAQ,6BAA6B;AACpD;AACA;AACA;AACA,OAAO,SAASC,YAAY,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAEC,UAAU,EAAE;EACrD,IAAIC,OAAO,GAAGN,MAAM,CAACG,GAAG,EAAEC,IAAI,CAAC;EAC/B,IAAIG,SAAS,GAAGF,UAAU,CAACG,eAAe,CAACF,OAAO,CAAC;EACnDJ,GAAG,CAACO,KAAK,CAACV,aAAa,EAAE,CAACO,OAAO,EAAEH,GAAG,EAAEC,IAAI,EAAEG,SAAS,CAAC,CAAC;EACzD,OAAOA,SAAS;AACpB;AACA;AACA;AACA;AACA,OAAO,SAASG,kBAAkB,CAACC,iBAAiB,EAAER,GAAG,EAAES,qBAAqB,EAAE;EAC9E;EACA,IAAID,iBAAiB,GAAG,GAAG,EAAE;IACzB,IAAIL,OAAO,GAAGN,MAAM,CAACG,GAAG,EAAES,qBAAqB,CAAC;IAChD,IAAIN,OAAO,GAAGK,iBAAiB,EAAE;MAC7B,OAAO,KAAK;IAChB;EACJ;EACA,OAAO,IAAI;AACf"},"metadata":{},"sourceType":"module"}