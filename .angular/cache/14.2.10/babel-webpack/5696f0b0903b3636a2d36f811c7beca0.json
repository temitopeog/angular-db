{"ast":null,"code":"import { thenable } from '../../utils/promise/thenable';\nimport { ENGINE_MATCHER_DEPENDENCY, ENGINE_MATCHER_DEPENDENCY_PRE } from '../../logger/constants';\nexport function dependencyMatcherContext(log, _a, storage) {\n  var split = _a.split,\n    treatments = _a.treatments;\n  function checkTreatment(evaluation, acceptableTreatments, parentName) {\n    var matches = false;\n    if (Array.isArray(acceptableTreatments)) {\n      matches = acceptableTreatments.indexOf(evaluation.treatment) !== -1;\n    }\n    log.debug(ENGINE_MATCHER_DEPENDENCY, [parentName, evaluation.treatment, evaluation.label, parentName, acceptableTreatments, matches]);\n    return matches;\n  }\n  return function dependencyMatcher(_a, splitEvaluator) {\n    var key = _a.key,\n      attributes = _a.attributes;\n    log.debug(ENGINE_MATCHER_DEPENDENCY_PRE, [split, JSON.stringify(key), attributes ? '\\n attributes: ' + JSON.stringify(attributes) : '']);\n    var evaluation = splitEvaluator(log, key, split, attributes, storage);\n    if (thenable(evaluation)) {\n      return evaluation.then(function (ev) {\n        return checkTreatment(ev, treatments, split);\n      });\n    } else {\n      return checkTreatment(evaluation, treatments, split);\n    }\n  };\n}","map":{"version":3,"names":["thenable","ENGINE_MATCHER_DEPENDENCY","ENGINE_MATCHER_DEPENDENCY_PRE","dependencyMatcherContext","log","_a","storage","split","treatments","checkTreatment","evaluation","acceptableTreatments","parentName","matches","Array","isArray","indexOf","treatment","debug","label","dependencyMatcher","splitEvaluator","key","attributes","JSON","stringify","then","ev"],"sources":["/Users/temitopeogunrekun/Desktop/angular-db/node_modules/@splitsoftware/splitio-commons/esm/evaluator/matchers/dependency.js"],"sourcesContent":["import { thenable } from '../../utils/promise/thenable';\nimport { ENGINE_MATCHER_DEPENDENCY, ENGINE_MATCHER_DEPENDENCY_PRE } from '../../logger/constants';\nexport function dependencyMatcherContext(log, _a, storage) {\n    var split = _a.split, treatments = _a.treatments;\n    function checkTreatment(evaluation, acceptableTreatments, parentName) {\n        var matches = false;\n        if (Array.isArray(acceptableTreatments)) {\n            matches = acceptableTreatments.indexOf(evaluation.treatment) !== -1;\n        }\n        log.debug(ENGINE_MATCHER_DEPENDENCY, [parentName, evaluation.treatment, evaluation.label, parentName, acceptableTreatments, matches]);\n        return matches;\n    }\n    return function dependencyMatcher(_a, splitEvaluator) {\n        var key = _a.key, attributes = _a.attributes;\n        log.debug(ENGINE_MATCHER_DEPENDENCY_PRE, [split, JSON.stringify(key), attributes ? '\\n attributes: ' + JSON.stringify(attributes) : '']);\n        var evaluation = splitEvaluator(log, key, split, attributes, storage);\n        if (thenable(evaluation)) {\n            return evaluation.then(function (ev) { return checkTreatment(ev, treatments, split); });\n        }\n        else {\n            return checkTreatment(evaluation, treatments, split);\n        }\n    };\n}\n"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,8BAA8B;AACvD,SAASC,yBAAyB,EAAEC,6BAA6B,QAAQ,wBAAwB;AACjG,OAAO,SAASC,wBAAwB,CAACC,GAAG,EAAEC,EAAE,EAAEC,OAAO,EAAE;EACvD,IAAIC,KAAK,GAAGF,EAAE,CAACE,KAAK;IAAEC,UAAU,GAAGH,EAAE,CAACG,UAAU;EAChD,SAASC,cAAc,CAACC,UAAU,EAAEC,oBAAoB,EAAEC,UAAU,EAAE;IAClE,IAAIC,OAAO,GAAG,KAAK;IACnB,IAAIC,KAAK,CAACC,OAAO,CAACJ,oBAAoB,CAAC,EAAE;MACrCE,OAAO,GAAGF,oBAAoB,CAACK,OAAO,CAACN,UAAU,CAACO,SAAS,CAAC,KAAK,CAAC,CAAC;IACvE;IACAb,GAAG,CAACc,KAAK,CAACjB,yBAAyB,EAAE,CAACW,UAAU,EAAEF,UAAU,CAACO,SAAS,EAAEP,UAAU,CAACS,KAAK,EAAEP,UAAU,EAAED,oBAAoB,EAAEE,OAAO,CAAC,CAAC;IACrI,OAAOA,OAAO;EAClB;EACA,OAAO,SAASO,iBAAiB,CAACf,EAAE,EAAEgB,cAAc,EAAE;IAClD,IAAIC,GAAG,GAAGjB,EAAE,CAACiB,GAAG;MAAEC,UAAU,GAAGlB,EAAE,CAACkB,UAAU;IAC5CnB,GAAG,CAACc,KAAK,CAAChB,6BAA6B,EAAE,CAACK,KAAK,EAAEiB,IAAI,CAACC,SAAS,CAACH,GAAG,CAAC,EAAEC,UAAU,GAAG,iBAAiB,GAAGC,IAAI,CAACC,SAAS,CAACF,UAAU,CAAC,GAAG,EAAE,CAAC,CAAC;IACxI,IAAIb,UAAU,GAAGW,cAAc,CAACjB,GAAG,EAAEkB,GAAG,EAAEf,KAAK,EAAEgB,UAAU,EAAEjB,OAAO,CAAC;IACrE,IAAIN,QAAQ,CAACU,UAAU,CAAC,EAAE;MACtB,OAAOA,UAAU,CAACgB,IAAI,CAAC,UAAUC,EAAE,EAAE;QAAE,OAAOlB,cAAc,CAACkB,EAAE,EAAEnB,UAAU,EAAED,KAAK,CAAC;MAAE,CAAC,CAAC;IAC3F,CAAC,MACI;MACD,OAAOE,cAAc,CAACC,UAAU,EAAEF,UAAU,EAAED,KAAK,CAAC;IACxD;EACJ,CAAC;AACL"},"metadata":{},"sourceType":"module"}