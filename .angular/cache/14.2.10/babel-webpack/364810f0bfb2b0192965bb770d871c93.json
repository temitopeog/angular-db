{"ast":null,"code":"import { findIndex } from '../../utils/lang';\nvar Treatments = /** @class */function () {\n  function Treatments(ranges, treatments) {\n    if (ranges[ranges.length - 1] !== 100) {\n      throw new RangeError('Provided invalid dataset as input');\n    }\n    this._ranges = ranges;\n    this._treatments = treatments;\n  }\n  Treatments.parse = function (data) {\n    var _a = data.reduce(function (accum, value) {\n        var size = value.size,\n          treatment = value.treatment;\n        accum.ranges.push(accum.inc += size);\n        accum.treatments.push(treatment);\n        return accum;\n      }, {\n        inc: 0,\n        ranges: [],\n        treatments: []\n      }),\n      ranges = _a.ranges,\n      treatments = _a.treatments;\n    return new Treatments(ranges, treatments);\n  };\n  Treatments.prototype.getTreatmentFor = function (x) {\n    if (x < 0 || x > 100) {\n      throw new RangeError('Please provide a value between 0 and 100');\n    }\n    // Readme [1]\n    // We need to manually add any dependency which escape of dummy resolution\n    // I'll deal with this in a future release\n    // for (let [k, r] of this._ranges.entries()) {\n    //   if (x <= r) return this._treatments[k];\n    // }\n    var index = findIndex(this._ranges, function (range) {\n      return x <= range;\n    });\n    var treatment = this._treatments[index];\n    return treatment;\n  };\n  return Treatments;\n}();\nexport { Treatments };","map":{"version":3,"names":["findIndex","Treatments","ranges","treatments","length","RangeError","_ranges","_treatments","parse","data","_a","reduce","accum","value","size","treatment","push","inc","prototype","getTreatmentFor","x","index","range"],"sources":["/Users/temitopeogunrekun/Desktop/angular-db/node_modules/@splitsoftware/splitio-commons/esm/evaluator/treatments/index.js"],"sourcesContent":["import { findIndex } from '../../utils/lang';\nvar Treatments = /** @class */ (function () {\n    function Treatments(ranges, treatments) {\n        if (ranges[ranges.length - 1] !== 100) {\n            throw new RangeError('Provided invalid dataset as input');\n        }\n        this._ranges = ranges;\n        this._treatments = treatments;\n    }\n    Treatments.parse = function (data) {\n        var _a = data.reduce(function (accum, value) {\n            var size = value.size, treatment = value.treatment;\n            accum.ranges.push(accum.inc += size);\n            accum.treatments.push(treatment);\n            return accum;\n        }, {\n            inc: 0,\n            ranges: [],\n            treatments: []\n        }), ranges = _a.ranges, treatments = _a.treatments;\n        return new Treatments(ranges, treatments);\n    };\n    Treatments.prototype.getTreatmentFor = function (x) {\n        if (x < 0 || x > 100) {\n            throw new RangeError('Please provide a value between 0 and 100');\n        }\n        // Readme [1]\n        // We need to manually add any dependency which escape of dummy resolution\n        // I'll deal with this in a future release\n        // for (let [k, r] of this._ranges.entries()) {\n        //   if (x <= r) return this._treatments[k];\n        // }\n        var index = findIndex(this._ranges, function (range) { return x <= range; });\n        var treatment = this._treatments[index];\n        return treatment;\n    };\n    return Treatments;\n}());\nexport { Treatments };\n"],"mappings":"AAAA,SAASA,SAAS,QAAQ,kBAAkB;AAC5C,IAAIC,UAAU,GAAG,aAAe,YAAY;EACxC,SAASA,UAAU,CAACC,MAAM,EAAEC,UAAU,EAAE;IACpC,IAAID,MAAM,CAACA,MAAM,CAACE,MAAM,GAAG,CAAC,CAAC,KAAK,GAAG,EAAE;MACnC,MAAM,IAAIC,UAAU,CAAC,mCAAmC,CAAC;IAC7D;IACA,IAAI,CAACC,OAAO,GAAGJ,MAAM;IACrB,IAAI,CAACK,WAAW,GAAGJ,UAAU;EACjC;EACAF,UAAU,CAACO,KAAK,GAAG,UAAUC,IAAI,EAAE;IAC/B,IAAIC,EAAE,GAAGD,IAAI,CAACE,MAAM,CAAC,UAAUC,KAAK,EAAEC,KAAK,EAAE;QACzC,IAAIC,IAAI,GAAGD,KAAK,CAACC,IAAI;UAAEC,SAAS,GAAGF,KAAK,CAACE,SAAS;QAClDH,KAAK,CAACV,MAAM,CAACc,IAAI,CAACJ,KAAK,CAACK,GAAG,IAAIH,IAAI,CAAC;QACpCF,KAAK,CAACT,UAAU,CAACa,IAAI,CAACD,SAAS,CAAC;QAChC,OAAOH,KAAK;MAChB,CAAC,EAAE;QACCK,GAAG,EAAE,CAAC;QACNf,MAAM,EAAE,EAAE;QACVC,UAAU,EAAE;MAChB,CAAC,CAAC;MAAED,MAAM,GAAGQ,EAAE,CAACR,MAAM;MAAEC,UAAU,GAAGO,EAAE,CAACP,UAAU;IAClD,OAAO,IAAIF,UAAU,CAACC,MAAM,EAAEC,UAAU,CAAC;EAC7C,CAAC;EACDF,UAAU,CAACiB,SAAS,CAACC,eAAe,GAAG,UAAUC,CAAC,EAAE;IAChD,IAAIA,CAAC,GAAG,CAAC,IAAIA,CAAC,GAAG,GAAG,EAAE;MAClB,MAAM,IAAIf,UAAU,CAAC,0CAA0C,CAAC;IACpE;IACA;IACA;IACA;IACA;IACA;IACA;IACA,IAAIgB,KAAK,GAAGrB,SAAS,CAAC,IAAI,CAACM,OAAO,EAAE,UAAUgB,KAAK,EAAE;MAAE,OAAOF,CAAC,IAAIE,KAAK;IAAE,CAAC,CAAC;IAC5E,IAAIP,SAAS,GAAG,IAAI,CAACR,WAAW,CAACc,KAAK,CAAC;IACvC,OAAON,SAAS;EACpB,CAAC;EACD,OAAOd,UAAU;AACrB,CAAC,EAAG;AACJ,SAASA,UAAU"},"metadata":{},"sourceType":"module"}